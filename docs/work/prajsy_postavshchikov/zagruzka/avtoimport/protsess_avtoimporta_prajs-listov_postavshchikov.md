---
title: Процесс автоимпорта прайс-листов поставщиков
createTime: 2025/05/16 21:51:40
---
Рассмотрим процесс автоматического импорта прайс-листов поставщиков.

**»** После запуска bat-файла происходит процесс обработки источников, указанных в правилах. Все правила группируются по источникам. Последовательно обрабатывается каждый источник. Каждое правило в группах обрабатывается последовательно друг за другом.

Если источник – почтовый ящик:

- выполняется подключение к почтовому серверу;

- проверяется отметка последнего обработанного письма. При наличии отметки обрабатываются только письма, пришедшие после отмеченного письма. При отсутствии отметки (при первой загрузке), обрабатываются письма за последние 5 дней. Также отметку можно выставить вручную в **Управлении письмами**;

- далее отбираются письма, соответствующие настройкам правил импорта. Подходящие вложения писем скачиваются во временную папку для последующей обработки.

Если источник – FTP:

- выполняется подключение к FTP-серверу;

- проверяется, изменен ли файл относительно предыдущей загрузки. Если файл изменен, он скачивается во временную папку для последующей обработки. Файл, загружаемый впервые, считается измененным.

**»** Далее выполняются дополнительные обработки файлов, если это указано в правилах, и производится импорт файлов в программу.

Во время выполнения процесса автоимпорта возможен запуск нескольких bat-файлов, содержащих разные наборы правил. Если несколько bat-файлов обрабатывают один и тот же прайс-лист одновременно, тогда он будет считаться заблокированным. Блокировка снимается автоматически после завершения обработки правила автоимпорта.

::: note Пример

Были запущены 2 bat-файла, в правилах которых содержался один и тот же прайс-лист. При выполнении автоимпорта прайс-лист попал под обновление одновременно в обоих файлах. В таком случае для второго запущенного файла прайс-лист будет считаться заблокированным. Если же он обрабатывался сначала в первом файле, а спустя какое-то время – во втором, то блокировки не возникнет.

:::

**»**  Затем по описанному алгоритму обрабатывается следующий источник.

По завершению процесса импорта будут обновлены прайс-листы поставщиков, с которыми можно ознакомиться в разделе меню **Товары и цены ► Прайс-листы поставщиков**.

Все шаги процесса фиксируются в **Журнал импорта** и в лог-файл процесса импорта.