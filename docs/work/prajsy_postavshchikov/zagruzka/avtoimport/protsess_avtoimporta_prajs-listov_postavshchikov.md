# Процесс автоимпорта прайс-листов поставщиков

Рассмотрим процесс автоматического импорта прайс-листов поставщиков.

**»** После запуска bat-файла происходит процесс обработки источников, указанных в правилах. Все правила группируются по источникам. Последовательно обрабатывается каждый источник. Каждое правило в группах обрабатывается последовательно друг за другом.

Если источник – почтовый ящик:

выполняется подключение к почтовому серверу;

проверяется отметка последнего обработанного письма. При наличии отметки обрабатываются только письма, пришедшие после отмеченного письма. При отсутствии отметки (при первой загрузке), обрабатываются письма за последние 5 дней. Также отметку можно выставить вручную в **Управлении письмами**;

далее отбираются письма, соответствующие настройкам правил импорта. Подходящие вложения писем скачиваются во временную папку для последующей обработки.

Если источник – FTP:

выполняется подключение к FTP-серверу;

проверяется, изменен ли файл относительно предыдущей загрузки. Если файл изменен, он скачивается во временную папку для последующей обработки. Файл, загружаемый впервые, считается измененным.

**»** Далее выполняются дополнительные обработки файлов, если это указано в правилах, и производится импорт файлов в программу.

**»**  Затем по описанному алгоритму обрабатывается следующий источник.

По завершению процесса импорта будут обновлены прайс-листы поставщиков, с которыми можно ознакомиться в разделе меню **Товары и цены ► Прайс-листы поставщиков**.

Все шаги процесса фиксируются в **Журнал импорта** и в лог-файл процесса импорта.

