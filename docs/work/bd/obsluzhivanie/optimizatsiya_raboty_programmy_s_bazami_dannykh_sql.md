---
title: Оптимизация работы программы с базами данных SQL
createTime: 2025/06/13 10:23:06
---
При работе с базой данных СУБД собирает определенную статистику для оптимального выполнения запросов к базе. С течением времени это может стать причиной снижения быстродействия работы программы.

::: info Примечание

Перед выполнением действий, описанных в данном разделе, необходимо создать резервную копию базы данных.

:::

С целью предотвращения падения скорости работы программы рекомендуется раз в месяц выполнять следующие действия:

Для MS SQL:

**»** Запустите Microsoft SQL Management Studio, перейдите в раздел **Базы данных**, выберите необходимую базу и выполните команду **Создать запрос**, откроется окно для ввода SQL-запроса;

::: warning Внимание!

Все пользователи, работающие с базой, обязательно должны выйти из программы.

:::

**»** Поочередно выполните следующие запросы (совместимы с SQL Server 2005 и выше):

- `sp\_msforeachtable N'DBCC DBREINDEX ("?")'` – реиндексация базы данных, т.е. полное перестроение индексов таблиц базы данных; 

- `exec sp\_msforeachtable N'UPDATE STATISTICS ? WITH FULLSCAN'` – обновление статистик таблиц базы данных;

- `DBCC FREEPROCCACHE` – очистка содержимого процедурного КЭШа.

::: note Замечание

На выполнение каждого из запросов может затрачиваться порядка 5-8 минут.

:::

При возобновлении работы с базой данных SQL Server будет выполнять кэширование данных, после чего будет заметно повышение быстродействия работы программы.

Для PostgreSQL:

**»** Запустите pgAdmin 4, перейдите в раздел **Базы данных**, выберите необходимую базу и в контекстном меню перейдите в раздел **Запросник**, откроется окно для ввода SQL-запроса;

**»** Поочередно выполните следующие запросы (совместимы с PostgreSQL 9.6 и выше):

- `reindex database [имя\_базы\_данных]` – реиндексация базы данных, т.е. полное перестроение индексов таблиц базы данных;

- `VACUUM(FULL, ANALYZE) [имя\_таблицы]` – удаление "мертвых строк" и анализ указанных таблиц.

::: details Читайте также

- [Создание резервной копии базы данных MS SQL](../../../guide/database/backup_database/sozdanie_rezervnoj_kopii_bazy_dannyh_ms_sql.md) 

:::