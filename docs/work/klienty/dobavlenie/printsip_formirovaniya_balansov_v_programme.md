---
title: printsip_formirovaniya_balansov_v_programme
createTime: 2025/05/21 12:01:38
---
# Принцип формирования балансов в программе

Рассмотрим принцип формирования балансов в программе.

Все балансы, за исключением **Баланса по возвратам**, считаются на основании **Финансовых транзакций**. **Финансовые транзакции** создаются во время проведения товарных и платежных документов, в дальнейшем не изменяются и удаляются только при удалении связанного документа. Платежи участвуют в расчете балансов только в том случае, если в параметрах платежа выставлен флаг **Балансовая операция**.

**Финансовые транзакции** хранятся в меню **Управление ► Журналы ► Финансовые транзакции**.

Все балансы контрагента считаются в валюте, указанной в поле **Основная валюта** карточки клиента. Все суммы по документам, участвующим в расчете, переводятся в основную валюту по курсу на дату каждого документа (поле **Дата**).

При подсчете баланса **Активные заказы**, суммы приводятся в основную валюту по курсу на дату (поле **Дата** документа) связанного заказа клиента или заказа поставщику.

Рассмотрим подробно формирование каждого баланса:

Баланс **Активные заказы** вычисляется на основании цепочки документов по общей формуле:

::: note Пример

*– Заказы клиента + Отказы клиента (по Заказам клиента) + Расходные накладные (по Заказам клиента) + Заказ-наряды (по Заказам клиента) + Заказы поставщику – Отказы поставщика (по Заказам поставщику) – Приходные накладные (по Заказам поставщику)*

:::
Признак "по Заказам клиента" означает, что для каждого документа берется сумма транзакций по позициям из соответствующего **Заказ клиента**. Сумма по позиции считается как **Цена продажи со скидкой и доставкой (с НДС)** \* **Количество**.

Признак "по Заказам поставщику" означает, что для каждого документа берется сумма транзакций по позициям из соответствующего документу **Заказа поставщику**. Сумма по позиции считается как **Закупочная цена со скидкой и доставкой (с НДС)** \* **Количество**.

Обнуление баланса происходит по ценам заказов, а не по ценам из отказов или накладных.

Пример:

::: note Пример

Создан Заказ клиента на 5 позиций, каждая стоимостью 100 р. Баланс Активные заказы стал -500 р.Затем создан Отказ клиента на одну позицию. Баланс Активные заказы стал -400 р.Далее создана Расходная накладная на 4 позиции на сумму 800р., вместо 400р. Баланс активные заказы стал 0р., так как в Заказе клиента не осталось "непогашенных" позиций.Для подсчета баланса отбираются все документы, где контрагент указан в качестве **Покупателя**, **Поставщика** и/или **Нашей фирмы**.•  Для контрагента с типом **Покупатель** и **Поставщик** баланс **Активные заказы** высчитывается на основании общей формулы.
•  Для контрагента с типом **Наша фирма** баланс **Активные заказы** высчитывается на основании общей формулы.
•  Для контрагента с типом **Покупатель** формула вычисления баланса **Активные заказы**:

*– Заказы клиента + Отказы клиента (по Заказам клиента) + Расходные накладные (по Заказам клиента) + Заказ-наряды (по Заказам клиента)*
•  Для контрагента с типом **Поставщик** формула вычисления баланса **Активные заказы**:

*+ Заказы поставщику – Отказы поставщика (по Заказам поставщику) – Приходные накладные (по Заказам поставщику).*

:::

**Баланс фактический** вычисляется на основании цепочки документов по общей формуле:

::: note Пример

*– Расходные накладные – Заказ-наряды + Возвраты клиента + Корректировки расходных накладных + Приходные накладные – Возвраты поставщику – Корректировки приходных накладных + Приходные кассовые ордера – Расходные кассовые ордера + Платежные поручения входящие – Платежные поручения + Оплаты по банковским картам – Возвраты по банковским картам*

:::
::: note Пример

Для подсчета баланса отбираются все документы, где контрагент указан в качестве **Покупателя**, **Поставщика** и/или **Нашей фирмы**.•  Для контрагента с типом **Покупатель** и **Поставщик** **Баланс фактический** высчитывается на основании общей формулы.
•  Для контрагента с типом **Наша фирма** **Баланс фактический** высчитывается на основании общей формулы.
•  Для контрагента с типом **Покупатель** формула вычисления **Баланса фактического**:

*– Расходные накладные – Заказ-наряды + Возвраты клиента + Корректировки расходных накладных + Приходные кассовые ордера – Расходные кассовые ордера + Платежные поручения входящие – Платежные поручения.*
•  Для контрагента с типом **Поставщик** формула вычисления **Баланса фактического**:

*+ Приходные накладные – Возвраты поставщику – Корректировки приходных накладных + Приходные кассовые ордера – Расходные кассовые ордера + Платежные поручения входящие – Платежные поручения + Оплаты по банковским картам – Возвраты по банковским картам.*

:::

**Баланс по заказам** является суммой **Активных заказов** и **Баланса фактического** и вычисляется на основании цепочки документов по общей формуле:

::: note Пример

*– Заказы клиента + Отказы клиента (по Заказам клиента) + Расходные накладные (по Заказам клиента) + Заказы поставщику – Отказы поставщика (по Заказам поставщику) – Приходные накладные (по Заказам поставщику) – Расходные накладные – Заказ-наряды + Возвраты клиента + Корректировки расходных накладных + Приходные накладные – Возвраты поставщику – Корректировки приходных накладных + Приходные кассовые ордера – Расходные кассовые ордера + Платежные поручения входящие – Платежные поручения + Оплаты по банковским картам – Возвраты по банковским картам*

:::
::: note Пример

•  Для контрагента с типом **Покупатель** и **Поставщик** **Баланс по заказам** высчитывается на основании общей формулы.
•  Для контрагента с типом **Наша фирма** **Баланс по заказам** высчитывается на основании общей формулы.
•  Для контрагента с типом **Покупатель** формула вычисления **Баланса по заказам**:

*+ Заказы поставщику – Отказы поставщика (по Заказам поставщику) – Приходные накладные (по Заказам поставщику) – Расходные накладные – Заказ-наряды + Возвраты клиента+ Корректировки расходных накладных* + *Приходные кассовые ордера – Расходные кассовые ордера + Платежные поручения входящие – Платежные поручения + Оплаты по банковским картам – Возвраты по банковским картам.*
•  Для контрагента с типом **Поставщик** формула вычисления **Баланса по заказам**:

*+ Заказы поставщику – Отказы поставщика (по Заказам поставщику) – Приходные накладные (по Заказам поставщику) + Приходные накладные – Возвраты поставщику – Корректировки приходных накладных + Приходные кассовые ордера – Расходные кассовые ордера + Платежные поручения входящие – Платежные поручения + Оплаты по банковским картам – Возвраты по банковским картам.*

:::

**Баланс по возвратам** вычисляется на основании цепочки документов по общей формуле:

::: note Пример

*Возвраты клиента – Расходные кассовые ордера – Платежные поручения – Возвраты поставщику – Возвраты по банковским картам + Приходные кассовые ордера + Платежные поручения входящие + Оплаты по банковским картам.*

:::
::: note Пример

Для расчета **Баланса по возвратам** используется та часть платежей, которая разнесена на документы возвратов.•  Для контрагента с типом **Покупатель** и **Поставщик** Баланс по возвратам высчитывается на основании общей формулы;
•  Для контрагента с типом **Наша фирма** Баланс по возвратам высчитывается на основании общей формулы;
•  Для контрагента с типом **Покупатель** формула вычисления Баланса по возвратам;

*Возвраты клиента – Расходные кассовые ордера – Платежные поручения – Возвраты по банковским картам.*
•  Для контрагента с типом **Поставщик** формула вычисления Баланса по возвратам.

*– Возвраты поставщику + Приходные кассовые ордера + Платежные поручения входящие + Оплаты по банковским картам.*

:::

**Баланс просроченный** вычисляется по общей формуле:

::: note Пример

*Баланс фактический+ (∑ Расходные накладные – ∑ Расходные накладные просроченные)*

:::
::: note Пример

В расчете участвуют только **Расходные накладные**, дата которых не превышает текущую.Значение Клиент и НФ в РН не должны совпадать.Рассмотрим подробно формирование баланса:•  Вычисляется сумма всех **Расходных накладных** по клиенту. Из полученной суммы вычитается сумма **Расходных накладных**, по которым прошло указанное количество дней отсрочки по оплате документа (на текущий момент) и по которым отсрочка равна 0;
•  Отсрочка по оплате задается в карточке контрагента (поле **Отсрочка платежа, дн**). Указанное в карточке значение передается в поле **Отсрочка платежа, дн** документа **Расходная накладная** для данного контрагента. Также отсрочка в документе может быть изменена пользователем, при наличии соответствующего разрешения (меню **Управление ► Настройки программы ► Роли пользователей ► Разрешения для роли пользователей** группа **Документы ► Расходные накладные** пункт **Можно изменять отсрочку платежа**).
•  При подсчете отсрочки также учитывается опция **Подсчет дней отсрочки платежа**. В зависимости от значения опции, могут быть использованы календарные или рабочие дни. Опцию можно задать в карточке контрагента или в меню **Управление** **► Настройки программы ► Настройки**, группа **CRM** **► Контрагенты**.
•  Затем сумма непросроченных **Расходных накладных** прибавляется к **Балансу фактическому**. Если получается отрицательное число, то оно и отображается в качестве значения баланса. В иных случаях указывается 0;
•  Таким образом, если у контрагента нет просроченных **Расходных накладных**, **Баланс просроченный** всегда будет равен 0;
•  Если **Баланс просроченный** у контрагентов отрицательный, то можно настроить запрет проводки **Расходных накладных** на таких контрагентов. Настраивается в меню **Управление ►** **Настройки программы ► Роли пользователей ► Разрешения для роли пользователей ► Документы ► Расходные накладные ►** опция **Можно проводить с превышением долга**.

:::

