---
title: Сортировка (ранжирование) маркетингов в проценке
createTime: 2025/05/31 12:21:59
---
При поиске товаров в Проценке, возможен случай, когда подбирается несколько подходящих маркетингов на один товар в соответствии с условиями поиска. Это влечет за собой необходимость сортировки (ранжирования) маркетингов для подбора конечной цены на товар:

**»** На первом шаге отсеиваются неподходящие маркетинги применительно к результату поиска:

- с недействующей акцией;

- для товаров в наличии: с неподходящим складом/ТТ, на котором расположен товар (при этом маркетинги для ТТ подходят и для товаров на Складах, расположенным под этой ТТ);

- с неподходящим диапазоном цен;

- с не подходящей категорией клиента;

- с неподходящим производителем;

- с неподходящей группой товара (для товаров в наличии);

- с неподходящей группой скидки.

Подходящим считается значение "**Любой**", либо **конкретно заданное** (в том числе "**не задана**"). При этом для **Торговых точек/Складов** включаются вложенные склады, а для **Групп товаров** вложенные группы.

**»** Затем всем подходящим маркетингам присваивается вес, согласно следующей таблице.

|КРИТЕРИЙ ИЗ МАРКЕТИНГА|СОВПАДЕНИЕ|ЛЮБОЕ ЗНАЧЕНИЕ|ПРИМЕЧАНИЕ|
| :-: | :-: | :-: | :-: |
|Признак действующей акции|14|13|***«14»*** если маркетинг с действующей акцией<br>***«13»*** если нет|
|Склад/ТТ, как место хранения товара из наличии|12 либо 11|10|***«12»*** если маркетинг из наличия и для конкретного склада/ТТ (где расположен товар)<br>***«11»*** если маркетинг из наличия и для ТТ, на которой расположен склад хранения товара<br>***«10»*** если маркетинг для позиции под заказ, либо под любой склад/ТТ|
|Диапазон цен|99\...01|00|Два разряда «***99...01»*** если маркетинг с заданным диапазоном цен, где значение вычисляется по формуле (максимальное значение 99, минимальное 01): =100 – приоритет диапазона цен<br>***«00»*** если маркетинг с диапазоном "весь диапазон"|
|Категория клиента|8|7|***«8»*** если маркетинг для конкретной категории клиентов, в том числе "не задана"<br>***«7»*** если маркетинг для любой категории клиента|
|Группа товара|6|5|***«6»*** если маркетинг для конкретной группы товара, в том числе "не задана"<br>***«5»*** если маркетинг для любой группы товара|
|Производитель|4|3|***«4»*** если маркетинг для конкретного производителя<br>***«3»*** если маркетинг для любого производителя|
|Группа скидки|2|1|***«2»*** если маркетинг для конкретной группы скидки, в том числе "не задана"<br>***«1»*** если маркетинг для любой группы скидки|

Принцип формирования веса: последовательно (от признака акции до группы скидки) анализируются критерии из маркетинга и, в зависимости от значения критерия, формируется итоговый вес из семи групп значений по каждому критерию.

Для каждого критерия присваивается числовое значение в соответствии с описанной выше таблицей, а затем, в соответствии с порядком критериев в таблице, эти значения формируют итоговый вес маркетинга.

Например, для маркетинга без признака акции по *складу №1,* *всего диапазона цен*, для категории клиентов *розница,* любой *группы товара* и производителя *BOSCH*, а также *любой группы скидки* получается последовательность "13" "12" "00" "8" "5" "4" "1", которая соответствует весу **1312008541**.

**»** Затем программа выстраивает маркетинги от большего веса к наименьшему. Если так получилось, что подобрано несколько маркетингов с одним весом, то в рамках группы с одинаковые весомы маркетинги сортируются по убыванию цены продажи. Маркетинг, который находится во главе отсортированного списка, используется для формирования цены на позицию проценки, остальные маркетинги скрываются в выпадающий контейнер в колонке с ценой.